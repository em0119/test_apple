:root {
    /* ★★★ 원하는 그리드 크기로 변경 ★★★ */
    --grid-cols: 10;
    --grid-rows: 15;
}

/* 기본 설정 (변경 없음) */
html, body { height: 100%; margin: 0; overflow: hidden; background-color: #aed581; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; user-select: none; -webkit-tap-highlight-color: transparent; }
body { display: flex; justify-content: center; align-items: center; }
.game-container { display: flex; flex-direction: column; width: 95vw; max-width: 420px; height: 95vh; max-height: 850px; align-items: center; gap: 15px; }
#score-display, .time-gauge-container { flex-shrink: 0; }
#score-display { font-size: clamp(1.5em, 5vw, 2em); font-weight: bold; text-align: center; color: white; text-shadow: 1px 1px 3px rgba(0,0,0,0.4); }
.time-gauge-container { width: 100%; height: 25px; background-color: #f1f8e9; border-radius: 15px; border: 3px solid #558b2f; overflow: hidden; }
#time-gauge { width: 100%; height: 100%; background-color: #ffca28; border-radius: 10px; transition: width 0.1s linear; }

/* 게임 보드와 그리드 스타일 */
#game-board {
    width: 100%;
    flex-grow: 1;
    min-height: 0;
    display: grid;
    place-items: center;
}

/* ★★★ 추가됨: 게임 보드 크기와 비율을 결정하는 핵심 역할 ★★★ */
.board-wrapper {
    width: 100%;
    max-height: 100%;
    aspect-ratio: var(--grid-cols) / var(--grid-rows);
}

/* ★★★ 수정됨: 이제 시각적 표현과 내용물만 담당 ★★★ */
#apple-container {
    width: 100%;
    height: 100%;
    position: relative; /* selection-box의 기준 */

    background-color: #f1f8e9;
    border: 5px solid #558b2f;
    border-radius: 15px;
    padding: 10px;
    box-sizing: border-box;

    display: grid;
    grid-template-columns: repeat(var(--grid-cols), 1fr);
    grid-template-rows: repeat(var(--grid-rows), 1fr);
    gap: 4px;
}

.apple {
    width: 100%; height: 100%; min-width: 0; min-height: 0;
    background-color: #ef5350; border-radius: 50%;
    display: flex; justify-content: center; align-items: center;
    font-weight: bold; font-size: clamp(0.8em, 4vw, 1.4em);
    color: white; cursor: pointer; z-index: 2;
}
.apple.removed { visibility: hidden; pointer-events: none; }

#selection-box {
    position: absolute; top: 0; left: 0;
    background-color: rgba(255, 236, 179, 0.4); border: 2px solid #ffca28;
    display: none; box-sizing: border-box; transform-origin: top left; z-index: 3;
}
#selection-box.valid { background-color: rgba(165, 214, 167, 0.5); border-color: #4caf50; }

/* 오버레이 스타일 (변경 없음) */
#overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); color: white; display: flex; justify-content: center; align-items: center; z-index: 10; }
#start-screen, #end-screen { display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 20px; }
#end-screen { display: none; }
#overlay h2 { font-size: 2em; }
#overlay p { font-size: 1em; line-height: 1.5; margin: 20px 0; }
#overlay button { padding: 10px 20px; font-size: 1.2em; border: none; border-radius: 10px; background-color: #ffca28; color: #3e2723; font-weight: bold; }